<header>
  <h3 class="title-30" i18n>Remote source</h3>

  <!-- @if (testSignal() == 'testing') {
    <sh-alert i18n>
      <sh-icon icon>spinner</sh-icon>
      Testing connection...
    </sh-alert>
  } @else if (testSignal() == 'success') {
    <sh-alert class="success" i18n>
      <sh-icon icon>check</sh-icon>
      Connection tested successfully.
    </sh-alert>
  } @else if (testSignal() == 'warning') {
    <sh-alert class="warn" i18n>
      <sh-icon icon>warning</sh-icon>
      {{ testErrorMessage() }}
    </sh-alert>
  } @else if (testSignal() == 'error') {
    <sh-alert class="error" i18n>
      <sh-icon icon>warning</sh-icon>
      {{ testErrorMessage() }}
    </sh-alert>
  } -->
</header>

<section content>
  @let hasDestination = !!targetUrlModel();

  @if (!hasDestination) {
    <app-destination-list [showAsSources]="true" (setDestination)="setDestination($event)"></app-destination-list>
  }

  @if (hasDestination) {
    <app-destination-list-item [targetUrl]="targetUrlModel()" class="current-destination">
      <button shButton i18n (click)="removeDestination()" type="button">Change</button>
    </app-destination-list-item>

    <app-test-url [(targetUrl)]="targetUrlModel" [(testSignal)]="testSignal"></app-test-url>

    <app-single-destination [(targetUrl)]="targetUrlModel" />
  }
</section>

<footer footer class="sticky">
  <button shButton type="button" (click)="closed.emit(null)" i18n>Cancel</button>
  <button
    shButton
    type="button"
    class="raised primary"
    [disabled]="!hasDestination || testSignal() === '' || testSignal() === 'testing'"
    [class.loading]="testSignal() === 'testing'"
    (click)="submit()"
    i18n>
    Use remote source
  </button>
</footer>
